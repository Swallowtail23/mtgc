<VirtualHost *:80>
    ServerName mtgc.local
    DocumentRoot /var/www/mtgnew

    ErrorLog /var/log/apache2/error.log
    CustomLog /var/log/apache2/access.log combined
    LogLevel warn

    <Files ~ "\.ini$">
        Require all denied
    </Files>

    Alias /cardimg/ /mnt/data/cardimg/
    <Directory /mnt/data/cardimg/>
        Require all granted
    </Directory>

    <Directory /var/www/mtgnew>
        Options -Indexes
        Header set X-Robots-Tag "noindex"
        FileETag MTime Size
        AddType image/x-icon .ico
        ExpiresActive On
        ExpiresByType image/gif "access plus 1 months"
        ExpiresByType image/jpg "access plus 1 months"
        ExpiresByType image/jpeg "access plus 1 months"
        ExpiresByType image/png "access plus 1 months"
        ExpiresByType image/svg+xml "access plus 1 months"
        ExpiresByType image/vnd.microsoft.icon "access plus 1 months"
        ExpiresByType application/javascript "access plus 1 months"
        ExpiresByType application/x-javascript "access plus 1 months"
        ExpiresByType text/javascript "access plus 1 months"
        ExpiresByType text/plain "access plus 1 year"
        ExpiresByType image/x-icon "access plus 1 year"
        ExpiresByType image/ico "access plus 1 year"
        ExpiresByType text/css "access plus 1 hour"
    </Directory>

    <Directory "/var/www/mtgnew/bulk">
        Require local
    </Directory>

    <Directory "/var/www/mtgnew/setup">
        Require local
    </Directory>

    <Location "/images">
        ExpiresActive On
        ExpiresDefault "access plus 1 month"
    </Location>

    <Location "/cardimg">
        ExpiresActive On
        ExpiresDefault "access plus 1 month"
    </Location>

    <Location "/cardimg/deck_photos">
        Require local
    </Location>

    # Enable gzip compression
    SetOutputFilter DEFLATE
    SetEnvIfNoCase Request_URI \.(?:exe|t?gz|zip|iso|tar|bz2|sit|rar|png|jpg|gif|jpeg|flv|swf|mp3)$ no-gzip dont-vary
    DeflateCompressionLevel 9
    BrowserMatch ^Mozilla/4 gzip-only-text/html
    BrowserMatch ^Mozilla/4.0[678] no-gzip
    BrowserMatch bMSIE !no-gzip !gzip-only-text/html
    SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0
</VirtualHost>
