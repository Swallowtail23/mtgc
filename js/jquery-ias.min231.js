/**
 * Infinite Ajax Scroll v2.3.1
 * A jQuery plugin for infinite scrolling
 * https://infiniteajaxscroll.com
 *
 * Commercial use requires one-time purchase of a commercial license
 * https://infiniteajaxscroll.com/docs/license.html
 *
 * Non-commercial use is licensed under the MIT License
 *
 * Copyright 2014-2018 Webcreate (Jeroen Fiege)
 */

(function(b){var c=-1;var a=function(d,e){this.itemsContainerSelector=e.container;this.itemSelector=e.item;this.nextSelector=e.next;this.paginationSelector=e.pagination;this.$scrollContainer=d;this.$container=(window===d.get(0)?b(document):d);this.defaultDelay=e.delay;this.negativeMargin=e.negativeMargin;this.nextUrl=null;this.isBound=false;this.isPaused=false;this.isInitialized=false;this.jsXhr=false;this.listeners={next:new IASCallbacks(b),load:new IASCallbacks(b),loaded:new IASCallbacks(b),render:new IASCallbacks(b),rendered:new IASCallbacks(b),scroll:new IASCallbacks(b),noneLeft:new IASCallbacks(b),ready:new IASCallbacks(b)};this.extensions=[];this.scrollHandler=function(){if(!this.isBound||this.isPaused){return}var g=this.getCurrentScrollOffset(this.$scrollContainer),f=this.getScrollThreshold();if(c==f){return}this.fire("scroll",[g,f]);if(g>=f){this.next()}};this.getItemsContainer=function(){return b(this.itemsContainerSelector,this.$container)};this.getLastItem=function(){return b(this.itemSelector,this.getItemsContainer().get(0)).last()};this.getFirstItem=function(){return b(this.itemSelector,this.getItemsContainer().get(0)).first()};this.getScrollThreshold=function(g){var f;g=g||this.negativeMargin;g=(g>=0?g*-1:g);f=this.getLastItem();if(0===f.length){return c}return(f.offset().top+f.height()+g)};this.getCurrentScrollOffset=function(h){var g=0,f=h.height();if(window===h.get(0)){g=h.scrollTop()}else{g=h.offset().top}if(navigator.platform.indexOf("iPhone")!=-1||navigator.platform.indexOf("iPod")!=-1){f+=80}return(g+f)};this.getNextUrl=function(f){f=f||this.$container;return b(this.nextSelector,f).last().attr("href")};this.load=function(g,n,i){var o=this,l,k=[],j=+new Date(),f;i=i||this.defaultDelay;var m={url:g,ajaxOptions:{dataType:"html"}};o.fire("load",[m]);function h(p){l=b(this.itemsContainerSelector,p).eq(0);if(0===l.length){l=b(p).filter(this.itemsContainerSelector).eq(0)}if(l){l.find(this.itemSelector).each(function(){k.push(this)})}o.fire("loaded",[p,k]);if(n){f=+new Date()-j;if(f<i){setTimeout(function(){n.call(o,p,k)},i-f)}else{n.call(o,p,k)}}}this.jsXhr=b.ajax(m.url,m.ajaxOptions).done(b.proxy(h,o));return this.jsXhr};this.render=function(g,k){var f=this,h=this.getLastItem(),i=0;var j=this.fire("render",[g]);j.done(function(){b(g).hide();h.after(g);b(g).fadeIn(400,function(){if(++i<g.length){return}f.fire("rendered",[g]);if(k){k()}})});j.fail(function(){if(k){k()}})};this.hidePagination=function(){if(this.paginationSelector){b(this.paginationSelector,this.$container).hide()}};this.restorePagination=function(){if(this.paginationSelector){b(this.paginationSelector,this.$container).show()}};this.throttle=function(j,g){var h=0,i,f;i=function(){var l=this,k=arguments,n=+new Date()-h;function m(){h=+new Date();j.apply(l,k)}if(!f){m()}else{clearTimeout(f)}if(n>g){m()}else{f=setTimeout(m,g)}};if(b.guid){i.guid=j.guid=j.guid||b.guid++}return i};this.fire=function(g,f){return this.listeners[g].fireWith(this,f)};this.pause=function(){this.isPaused=true};this.resume=function(){this.isPaused=false};return this};a.prototype.initialize=function(){if(this.isInitialized){return false}var f=(!!("onscroll" in this.$scrollContainer.get(0))),e=this.getCurrentScrollOffset(this.$scrollContainer),d=this.getScrollThreshold();if(!f){return false}this.hidePagination();this.bind();this.nextUrl=this.getNextUrl();if(!this.nextUrl){this.fire("noneLeft",[this.getLastItem()])}if(this.nextUrl&&e>=d){this.next();this.one("rendered",function(){this.isInitialized=true;this.fire("ready")})}else{this.isInitialized=true;this.fire("ready")}return this};a.prototype.reinitialize=function(){this.isInitialized=false;this.unbind();this.initialize()};a.prototype.bind=function(){if(this.isBound){return}this.$scrollContainer.on("scroll",b.proxy(this.throttle(this.scrollHandler,150),this));for(var e=0,d=this.extensions.length;e<d;e++){this.extensions[e].bind(this)}this.isBound=true;this.resume()};a.prototype.unbind=function(){if(!this.isBound){return}this.$scrollContainer.off("scroll",this.scrollHandler);for(var e=0,d=this.extensions.length;e<d;e++){if(typeof this.extensions[e]["unbind"]!="undefined"){this.extensions[e].unbind(this)}}this.isBound=false};a.prototype.destroy=function(){try{this.jsXhr.abort()}catch(d){}this.unbind();this.$scrollContainer.data("ias",null)};a.prototype.on=function(e,f,d){if(typeof this.listeners[e]=="undefined"){throw new Error('There is no event called "'+e+'"')}d=d||0;this.listeners[e].add(b.proxy(f,this),d);if(this.isInitialized){if(e==="ready"){b.proxy(f,this)()}else{if(e==="noneLeft"&&!this.nextUrl){b.proxy(f,this)()}}}return this};a.prototype.one=function(f,g){var d=this;var e=function(){d.off(f,g);d.off(f,e)};this.on(f,g);this.on(f,e);return this};a.prototype.off=function(d,e){if(typeof this.listeners[d]=="undefined"){throw new Error('There is no event called "'+d+'"')}this.listeners[d].remove(e);return this};a.prototype.next=function(){var e=this.nextUrl,d=this;if(!e){return false}this.pause();var f=this.fire("next",[e]);f.done(function(){d.load(e,function(h,g){d.render(g,function(){d.nextUrl=d.getNextUrl(h);if(!d.nextUrl){d.fire("noneLeft",[d.getLastItem()])}d.resume()})})});f.fail(function(){d.resume()});return true};a.prototype.extension=function(d){if(typeof d.bind=="undefined"){throw new Error('Extension doesn\'t have required method "bind"')}if(typeof d.initialize!="undefined"){d.initialize(this)}this.extensions.push(d);if(this.isBound){this.reinitialize()}return this};b.ias=function(d){var e=b(window);return e.ias.apply(e,arguments)};b.fn.ias=function(f){var e=Array.prototype.slice.call(arguments);var d=this;this.each(function(){var i=b(this),g=i.data("ias"),h=b.extend({},b.fn.ias.defaults,i.data(),typeof f=="object"&&f);if(!g){i.data("ias",(g=new a(i,h)));if(h.initialize){b(document).ready(b.proxy(g.initialize,g))}}if(typeof f==="string"){if(typeof g[f]!=="function"){throw new Error('There is no method called "'+f+'"')}e.shift();g[f].apply(g,e)}d=g});return d};b.fn.ias.defaults={item:".item",container:".listing",next:".next",pagination:false,delay:600,negativeMargin:10,initialize:true}})(jQuery);